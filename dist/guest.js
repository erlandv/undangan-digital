(()=>{var B=(()=>{let n=null,i=null,c=0,r=0,f=!0,a=()=>{c+=1},l=()=>`(${r}/${c}) [${parseInt(r/c*100).toFixed(0)}%]`;return{init:()=>{n=document.getElementById("progress-info"),i=document.getElementById("progress-bar"),n.style.display="block"},add:a,invalid:w=>{f=!1,i.style.backgroundColor="red",n.innerText=`Error loading ${w} ${l()}`},complete:w=>{f&&(r+=1,n.innerText=`Loading ${w} complete ${l()}`,i.style.width=Math.min(r/c*100,100).toString()+"%",r===c&&document.dispatchEvent(new Event("progress.done")))}}})();var k=(()=>{let n=u=>String(u).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),i=(u,g)=>{let w=null;w=setTimeout(()=>{u(),clearTimeout(w),w=null},g)};return{copy:async(u,g=null,w=1500)=>{let b=u.getAttribute("data-copy");if(!b||b.length===0){alert("Nothing to copy");return}u.disabled=!0;try{await navigator.clipboard.writeText(b)}catch{u.disabled=!1,alert("Failed to copy");return}let m=u.innerHTML;u.innerHTML=g||'<i class="fa-solid fa-check"></i>',i(()=>{u.disabled=!1,u.innerHTML=m},w)},timeOut:i,escapeHtml:n,base64Encode:u=>{let w=new TextEncoder().encode(u);return window.btoa(String.fromCharCode(...w))},base64Decode:u=>{let g=new TextDecoder,w=Uint8Array.from(window.atob(u),b=>b.charCodeAt(0));return g.decode(w)},disableButton:(u,g="Loading")=>{u.disabled=!0;let w=u.innerHTML;return u.innerHTML=`<span class="spinner-border spinner-border-sm my-0 ms-0 me-1 p-0" style="height: 0.8rem; width: 0.8rem"></span>${g}`,{restore:()=>{u.innerHTML=w,u.disabled=!1}}},disableCheckbox:u=>{u.disabled=!0;let g=document.querySelector(`label[for="${u.id}"]`),w=g.innerHTML;return g.innerHTML=`<span class="spinner-border spinner-border-sm my-0 ms-0 me-1 p-0" style="height: 0.8rem; width: 0.8rem"></span>${w}`,{restore:()=>{g.innerHTML=w,u.disabled=!1}}},parseUserAgent:u=>{let g=[{type:"Mobile",regex:/Android.*Mobile|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i},{type:"Tablet",regex:/iPad|Android(?!.*Mobile)|Tablet/i},{type:"Desktop",regex:/Windows NT|Macintosh|Linux/i}],w=[{name:"Chrome",regex:/Chrome|CriOS/i},{name:"Safari",regex:/Safari/i},{name:"Edge",regex:/Edg|Edge/i},{name:"Firefox",regex:/Firefox|FxiOS/i},{name:"Opera",regex:/Opera|OPR/i},{name:"Internet Explorer",regex:/MSIE|Trident/i}],b=[{name:"Windows",regex:/Windows NT ([\d.]+)/i},{name:"MacOS",regex:/Mac OS X ([\d_]+)/i},{name:"Android",regex:/Android ([\d.]+)/i},{name:"iOS",regex:/OS ([\d_]+) like Mac OS X/i},{name:"Linux",regex:/Linux/i}],m=g.find(x=>x.regex.test(u))?.type||"Unknown",d=w.find(x=>x.regex.test(u))?.name||"Unknown",y=b.find(x=>x.regex.test(u)),T=y&&u.match(y.regex)?.[1]?.replace(/_/g,".")||"",v=y?y.name:"Unknown";return T=T?`${v} ${T}`:v,`${d} ${m} ${T}`}}})();var J=(()=>{let n=null,i=null,c=!1,r=1e3*60*60*6,f="images",a=async b=>{let m=b.getAttribute("data-src"),d="x-expiration-time",y="image/webp",T=new Image;if(T.onload=()=>{b.src=T.src,b.width=T.width,b.height=T.height,T.remove(),B.complete("image")},n.has(m)){T.src=n.get(m);return}let v=A=>new Promise((o,t)=>{let e=document.createElement("canvas");e.width=A.width,e.height=A.height,e.getContext("2d").drawImage(A,0,0);let s=h=>{e.remove(),h?o(h):t(new Error("Failed to convert image to WebP"))};e.onerror=t,e.toBlob(s,y,.8)}),x=(A,o=3,t=1e3)=>fetch(m).then(e=>e.blob()).then(e=>window.createImageBitmap(e)).then(e=>v(e)).then(e=>{let s=new Headers;return s.set("Content-Type",y),s.set("Content-Length",String(e.size)),s.set(d,String(Date.now()+r)),A.put(m,new Response(e,{headers:s})).then(()=>e)}).catch(e=>{if(o<=0)throw e;return console.warn("Retrying fetch:"+m),new Promise(s=>k.timeOut(()=>s(x(A,o-1,t+1e3)),t))}),I=A=>A.match(m).then(o=>o?Date.now()<=parseInt(o.headers.get(d))?o.blob():A.delete(m).then(t=>t?x(A):o.blob()):x(A));await caches.open(f).then(A=>I(A)).then(A=>{T.src=URL.createObjectURL(A),n.set(m,T.src)}).catch(()=>B.invalid("image"))},l=b=>{b.onerror=()=>B.invalid("image"),b.onload=()=>{b.width=b.naturalWidth,b.height=b.naturalHeight,B.complete("image")},b.complete&&b.naturalWidth!==0&&b.naturalHeight!==0?B.complete("image"):b.complete&&B.invalid("image")},p=()=>c,u=b=>{r=Number(b)},g=()=>{(async()=>{for(let b of i)b.hasAttribute("data-src")?await a(b):l(b)})()};return{init:()=>(n=new Map,i=document.querySelectorAll("img"),i.forEach(B.add),c=Array.from(i).some(b=>b.hasAttribute("data-src")),{load:g,setTtl:u,hasDataSrc:p})}})();var K=(()=>{let n=null,i=null,c=!1,r='<i class="fa-solid fa-circle-pause spin-button"></i>',f='<i class="fa-solid fa-circle-play"></i>',a=async()=>{if(navigator.onLine){n.disabled=!0;try{await i.play(),c=!0,n.disabled=!1,n.innerHTML=r}catch(u){c=!1,alert(u)}}},l=()=>{c=!1,i.pause(),n.innerHTML=f};return{init:()=>{n=document.getElementById("button-music"),n.style.display="block",i=new Audio(n.getAttribute("data-url")),i.volume=1,i.loop=!0,i.muted=!1,i.currentTime=0,i.autoplay=!1,i.controls=!1,i.addEventListener("canplay",a),n.addEventListener("offline",l),n.addEventListener("click",()=>c?l():a())}}})();var X={tab:c=>window.bootstrap.Tab.getOrCreateInstance(document.getElementById(c)),modal:c=>window.bootstrap.Modal.getOrCreateInstance(document.getElementById(c))};var L=n=>{let i=(l=null)=>{let p=JSON.parse(localStorage.getItem(n));return l?p[String(l)]:p},c=(l,p)=>{let u=i();u[String(l)]=p,localStorage.setItem(n,JSON.stringify(u))},r=l=>Object.keys(i()).includes(String(l)),f=l=>{if(!r(l))return;let p=i();delete p[String(l)],localStorage.setItem(n,JSON.stringify(p))},a=()=>localStorage.setItem(n,"{}");return localStorage.getItem(n)||a(),{set:c,get:i,has:r,clear:a,unset:f}};var j=(()=>{let n={"#000000":"#ffffff","#ffffff":"#000000","#212529":"#f8f9fa","#f8f9fa":"#212529"},i=["#ffffff","#f8f9fa"],c=["#000000","#212529"],r=!1,f=null,a=null,l=()=>f.set("active","light"),p=()=>f.set("active","dark"),u=v=>{let x=a.getAttribute("content");a.setAttribute("content",v.some(I=>I===x)?n[x]:x)},g=()=>{l(),document.documentElement.setAttribute("data-bs-theme","light"),u(c)},w=()=>{p(),document.documentElement.setAttribute("data-bs-theme","dark"),u(i)},b=(v=null,x=null)=>{let I=f.get("active")==="dark";return v&&x?I?v:x:I};return{init:()=>{switch(f=L("theme"),a=document.querySelector('meta[name="theme-color"]'),f.has("active")||(window.matchMedia("(prefers-color-scheme: dark)").matches?p():l()),document.documentElement.getAttribute("data-bs-theme")){case"dark":p();break;case"light":l();break;default:r=!0}b()?w():g()},spyTop:()=>{let v=I=>I.filter(A=>A.isIntersecting).forEach(A=>{let o=A.target.classList.contains("bg-white-black")?b(c[0],i[0]):b(c[1],i[1]);a.setAttribute("content",o)}),x=new IntersectionObserver(v,{rootMargin:"0% 0% -95% 0%"});document.querySelectorAll("section").forEach(I=>x.observe(I))},change:()=>b()?g():w(),isDarkMode:b,isAutoMode:()=>r}})();var H=(()=>{let n=(m,d,y)=>({code:m,data:d,error:y}),i=(m=0)=>({love:m}),c=({uuid:m,own:d,name:y,presence:T,comment:v,created_at:x,is_admin:I,ip:A,user_agent:o,comments:t,like:e})=>({uuid:m,own:d,name:y,presence:T,comment:v,created_at:x,is_admin:I??!1,ip:A,user_agent:o,comments:t?.map(c)??[],like:i(e?.love??0)});return{uuidResponse:({uuid:m})=>({uuid:m}),baseResponse:n,tokenResponse:({token:m})=>({token:m}),statusResponse:({status:m})=>({status:m}),commentResponse:({name:m,presence:d,comment:y,is_admin:T,created_at:v})=>({name:m,presence:d,comment:y,is_admin:T,created_at:v}),likeCommentResponse:i,getCommentResponse:c,getCommentsResponse:m=>m.map(c),commentShowMore:(m,d=!1)=>({uuid:m,show:d}),postCommentRequest:(m,d,y,T)=>({id:m,name:d,presence:y,comment:T}),postSessionRequest:(m,d)=>({email:m,password:d}),updateCommentRequest:(m,d)=>({presence:m,comment:d})}})();var W="GET",Y="PUT",F="POST",Z="PATCH",Q="DELETE",U=200,V=201,re=500,O=(n,i)=>{let c=new AbortController,r=document.body.getAttribute("data-url"),f={signal:c.signal,method:String(n).toUpperCase(),headers:new Headers({Accept:"application/json","Content-Type":"application/json"})};return window.addEventListener("offline",()=>c.abort()),window.addEventListener("popstate",()=>c.abort()),window.addEventListener("beforeunload",()=>c.abort()),r.slice(-1)==="/"&&(r=r.slice(0,-1)),{send(a=null){return fetch(r+i,f).then(l=>l.json().then(p=>{if(l.status>=re&&(p.message??p[0]))throw new Error(p.message??p[0]);if(p.error)throw new Error(p.error[0]);return a&&(p.data=a(p.data)),H.baseResponse(p.code,p.data,p.error)})).catch(l=>{if(l.name==="AbortError")return console.warn("Fetch abort:",l),l;throw alert(l),new Error(l)})},download(){return fetch(r+i,f).then(a=>{if(a.status!==U)return!1;let l=document.querySelector("a[download]");l&&document.body.removeChild(l);let p=a.headers.get("content-disposition")?.match(/filename="(.+)"/)?.[1]??"download.csv";return a.blob().then(u=>{let g=document.createElement("a"),w=window.URL.createObjectURL(u);return g.href=w,g.download=p,document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(w),!0})}).catch(a=>{if(a.name==="AbortError")return console.warn("Fetch abort:",a),a;throw alert(a),new Error(a)})},token(a){return a.split(".").length===3?(f.headers.append("Authorization","Bearer "+a),this):(f.headers.append("x-access-key",a),this)},body(a){return f.body=JSON.stringify(a),this}}};var $=(()=>{let n=null,i=()=>n.get("token"),c=g=>n.set("token",g),r=g=>O(F,"/api/session").body(g).send(H.tokenResponse).then(w=>(w.code===U&&c(w.data.token),w.code===U),()=>!1),f=()=>n.unset("token"),a=()=>String(i()??".").split(".").length===3;return{init:()=>{n=L("session")},guest:()=>O(W,"/api/config").token(i()).send().then(g=>{if(g.code!==U)throw new Error("failed to get config.");let w=L("config");for(let[b,m]of Object.entries(g.data))w.set(b,m);return g}),login:r,logout:f,decode:()=>{if(!a())return null;try{return JSON.parse(window.atob(i().split(".")[1]))}catch{return null}},isAdmin:a,setToken:c,getToken:i}})();var ee=(()=>{let n=null,i=!0,c=()=>i,r=m=>new Promise(d=>{let y=parseFloat(n.style.opacity),T=null,v=m?.05:-.05,x=m?1:0;T=setInterval(()=>{y=Math.max(0,Math.min(1,y+v)),n.style.opacity=y.toFixed(2),y===x&&(d(),clearInterval(T),T=null)},10)}),f=()=>{let m=n.firstElementChild.firstElementChild;m.classList.remove("bg-success"),m.classList.add("bg-danger"),m.firstElementChild.innerHTML='<i class="fa-solid fa-ban me-2"></i>Koneksi tidak tersedia'},a=()=>{let m=n.firstElementChild.firstElementChild;m.classList.remove("bg-danger"),m.classList.add("bg-success"),m.firstElementChild.innerHTML='<i class="fa-solid fa-cloud me-2"></i>Koneksi tersedia kembali'},l=async()=>{await r(!1),f()},p=()=>{let m=null;m=setTimeout(()=>{clearTimeout(m),m=null,i&&l()},3e3)},u=()=>{let m=["input[data-offline-disabled]","button[data-offline-disabled]","select[data-offline-disabled]","textarea[data-offline-disabled]"].join(", ");document.querySelectorAll(m).forEach(d=>{d.dispatchEvent(new Event(c()?"online":"offline")),d.setAttribute("data-offline-disabled",c()?"false":"true"),d.tagName==="BUTTON"?c()?d.classList.remove("disabled"):d.classList.add("disabled"):c()?d.removeAttribute("disabled"):d.setAttribute("disabled","true")})},g=()=>{i=!1,f(),r(!0),u()},w=()=>{i=!0,a(),p(),u()};return{init:()=>{window.addEventListener("online",w),window.addEventListener("offline",g),n=document.getElementById("offline-mode"),n.innerHTML=`
        <div class="d-flex justify-content-center mx-auto">
            <div class="d-flex justify-content-center align-items-center rounded-pill my-2 bg-danger shadow">
                <small class="text-center py-1 px-2 mx-1 mt-1 mb-0 text-white" style="font-size: 0.8rem;"></small>
            </div>
        </div>`},isOnline:c}})();var R=(()=>{let n=null,i=null,c=null,r=null,f=null,a=null,l=250,p=[["*",'<strong class="text-theme-auto">$1</strong>'],["_",'<em class="text-theme-auto">$1</em>'],["~",'<del class="text-theme-auto">$1</del>'],["```",'<code class="font-monospace text-theme-auto">$1</code>']],u=()=>`
        <div class="bg-theme-auto shadow p-3 mx-0 mt-0 mb-3 rounded-4">
            <div class="d-flex justify-content-between align-items-center placeholder-wave">
                <span class="placeholder bg-secondary col-5 rounded-3 my-1"></span>
                <span class="placeholder bg-secondary col-3 rounded-3 my-1"></span>
            </div>
            <hr class="my-1">
            <p class="placeholder-wave m-0">
                <span class="placeholder bg-secondary col-6 rounded-3"></span>
                <span class="placeholder bg-secondary col-5 rounded-3"></span>
                <span class="placeholder bg-secondary col-12 rounded-3 my-1"></span>
            </p>
        </div>`,g=e=>(p.forEach(s=>{let h=s[0],E=s[1];e=e.replace(new RegExp(`\\${h}(?=\\S)(.*?)(?<!\\s)\\${h}`,"gs"),E)}),e),w=e=>`
        <button style="font-size: 0.8rem;" onclick="undangan.comment.like.love(this)" data-uuid="${e.uuid}" class="btn btn-sm btn-outline-auto ms-auto rounded-3 p-0 shadow-sm d-flex justify-content-start align-items-center" data-offline-disabled="false">
            <span class="my-0 mx-1" data-count-like="${e.like.love}">${e.like.love}</span>
            <i class="me-1 ${c.has(e.uuid)?"fa-solid fa-heart text-danger":"fa-regular fa-heart"}"></i>
        </button>`,b=e=>{let s=`<div class="d-flex justify-content-start align-items-center" data-button-action="${e.uuid}">`;return(r.get("can_reply")===!0||r.get("can_reply")===void 0)&&(s+=`<button style="font-size: 0.8rem;" onclick="undangan.comment.reply(this)" data-uuid="${e.uuid}" class="btn btn-sm btn-outline-auto rounded-4 py-0 me-1 shadow-sm" data-offline-disabled="false">Reply</button>`),i.has(e.uuid)&&(r.get("can_edit")===!0||r.get("can_edit")===void 0)&&(s+=`<button style="font-size: 0.8rem;" onclick="undangan.comment.edit(this)" data-uuid="${e.uuid}" class="btn btn-sm btn-outline-auto rounded-4 py-0 me-1 shadow-sm" data-offline-disabled="false">Edit</button>`),$.isAdmin()?s+=`<button style="font-size: 0.8rem;" onclick="undangan.comment.remove(this)" data-uuid="${e.uuid}" class="btn btn-sm btn-outline-auto rounded-4 py-0 me-1 shadow-sm" data-own="${e.own}" data-offline-disabled="false">Delete</button>`:i.has(e.uuid)&&(r.get("can_delete")===!0||r.get("can_delete")===void 0)&&(s+=`<button style="font-size: 0.8rem;" onclick="undangan.comment.remove(this)" data-uuid="${e.uuid}" class="btn btn-sm btn-outline-auto rounded-4 py-0 me-1 shadow-sm" data-offline-disabled="false">Delete</button>`),s+="</div>",s},m=(e,s)=>{let h=a.get("show").includes(e);return`<a class="text-theme-auto" style="font-size: 0.8rem;" onclick="undangan.comment.showOrHide(this)" data-uuid="${e}" data-uuids="${s.join(",")}" data-show="${h?"true":"false"}" role="button" class="me-auto ms-1 py-0">${h?"Hide replies":`Show replies (${s.length})`}</a>`},d=e=>`
        <div class="d-flex justify-content-between align-items-center" id="button-${e.uuid}">
            ${b(e)}
            ${e.comments.length>0?m(e.uuid,e.comments.map(s=>s.uuid)):""}
            ${w(e)}
        </div>`,y=e=>e.ip===void 0||e.user_agent===void 0||e.is_admin?"":`
        <div class="mb-1 mt-3">
            <p class="text-theme-auto mb-1 mx-0 mt-0 p-0" style="font-size: 0.7rem;" id="ip-${e.uuid}"><i class="fa-solid fa-location-dot me-1"></i>${k.escapeHtml(e.ip)} ${f.has(e.ip)?`<strong>${f.get(e.ip)}</strong>`:'<span class="mb-1 placeholder col-2 rounded-3"></span>'}</p>
            <p class="text-theme-auto m-0 p-0" style="font-size: 0.7rem;"><i class="fa-solid fa-mobile-screen-button me-1"></i>${k.parseUserAgent(k.escapeHtml(e.user_agent))}</p>
        </div>`,T=(e,s)=>s?'class="bg-theme-auto shadow p-3 mx-0 mt-0 mb-3 rounded-4" data-parent="true"':`class="${a.get("hidden").find(h=>h.uuid===e.uuid).show?"":"d-none"} overflow-x-scroll mw-100 border-start bg-theme-auto py-2 ps-2 pe-0 my-2 ms-2 me-0"`,v=(e,s)=>e.is_admin?`<strong class="me-1">${k.escapeHtml(n.get("name")??r.get("name"))}</strong><i class="fa-solid fa-certificate text-primary"></i>`:s?`<strong class="me-1">${k.escapeHtml(e.name)}</strong><i id="badge-${e.uuid}" class="fa-solid ${e.presence?"fa-circle-check text-success":"fa-circle-xmark text-danger"}"></i>`:`<strong>${k.escapeHtml(e.name)}</strong>`,x=(e,s)=>{let h=g(k.escapeHtml(e.comment)),E=h.length>l;return`
        <div class="d-flex justify-content-between align-items-center">
            <p class="text-theme-auto text-truncate m-0 p-0" style="font-size: 0.95rem;">${v(e,s)}</p>
            <small class="text-theme-auto m-0 p-0" style="font-size: 0.75rem;">${e.created_at}</small>
        </div>
        <hr class="my-1">
        <p class="text-theme-auto my-1 mx-0 p-0" style="white-space: pre-wrap !important; font-size: 0.95rem;" ${E?`data-comment="${k.base64Encode(h)}"`:""} id="content-${e.uuid}">${E?h.slice(0,l)+"...":h}</p>
        ${E?`<p class="mb-2 mt-0 mx-0 p-0"><a class="text-theme-auto" role="button" style="font-size: 0.85rem; display: block;" data-show="false" onclick="undangan.comment.showMore(this, '${e.uuid}')">Selengkapnya</a></p>`:""}`},I=(e,s)=>`
        <div ${T(e,s)} id="${e.uuid}" style="overflow-wrap: break-word !important;">
            <div id="body-content-${e.uuid}" data-tapTime="0" data-liked="false" tabindex="0">
                ${x(e,s)}
            </div>
            ${y(e)}
            ${d(e)}
            <div id="reply-content-${e.uuid}">${e.comments.map(h=>I(h,!1)).join("")}</div>
        </div>`;return{init:()=>{n=L("user"),i=L("owns"),c=L("likes"),r=L("config"),f=L("tracker"),a=L("comment")},renderEdit:(e,s,h)=>{let E=document.createElement("div");return E.classList.add("my-2"),E.id=`inner-${e}`,E.innerHTML=`
        <label for="form-inner-${e}" class="form-label my-1" style="font-size: 0.95rem;"><i class="fa-solid fa-pen me-2"></i>Edit</label>
        ${h?`
        <select class="form-select shadow-sm mb-2 rounded-4" id="form-inner-presence-${e}" data-offline-disabled="false">
            <option value="1" ${s?"selected":""}>Datang</option>
            <option value="2" ${s?"":"selected"}>Berhalangan</option>
        </select>`:""}
        <textarea class="form-control shadow-sm rounded-4 mb-2" id="form-inner-${e}" minlength="1" maxlength="1000" placeholder="Type update comment" rows="3" data-offline-disabled="false"></textarea>
        <div class="d-flex justify-content-end align-items-center mb-0">
            <button style="font-size: 0.8rem;" onclick="undangan.comment.cancel('${e}')" class="btn btn-sm btn-outline-auto rounded-4 py-0 me-1" data-offline-disabled="false">Cancel</button>
            <button style="font-size: 0.8rem;" onclick="undangan.comment.update(this)" data-uuid="${e}" class="btn btn-sm btn-outline-auto rounded-4 py-0" data-offline-disabled="false">Update</button>
        </div>`,E},renderReply:e=>{let s=document.createElement("div");return s.classList.add("my-2"),s.id=`inner-${e}`,s.innerHTML=`
        <label for="form-inner-${e}" class="form-label my-1" style="font-size: 0.95rem;"><i class="fa-solid fa-reply me-2"></i>Reply</label>
        <textarea class="form-control shadow-sm rounded-4 mb-2" id="form-inner-${e}" minlength="1" maxlength="1000" placeholder="Type reply comment" rows="3" data-offline-disabled="false"></textarea>
        <div class="d-flex justify-content-end align-items-center mb-0">
            <button style="font-size: 0.8rem;" onclick="undangan.comment.cancel('${e}')" class="btn btn-sm btn-outline-auto rounded-4 py-0 me-1" data-offline-disabled="false">Cancel</button>
            <button style="font-size: 0.8rem;" onclick="undangan.comment.send(this)" data-uuid="${e}" class="btn btn-sm btn-outline-auto rounded-4 py-0" data-offline-disabled="false">Send</button>
        </div>`,s},renderLoading:u,renderReadMore:m,renderInnerContent:e=>I(e,!1),renderContent:e=>I(e,!0),convertMarkdownToHTML:g,maxCommentLength:l}})();var te=()=>window.confetti.shapeFromPath({path:"M167 72c19,-38 37,-56 75,-56 42,0 76,33 76,75 0,76 -76,151 -151,227 -76,-76 -151,-151 -151,-227 0,-42 33,-75 75,-75 38,0 57,18 76,56z",matrix:[.03333333333333333,0,0,.03333333333333333,-5.566666666666666,-5.533333333333333]}),ne=()=>{window.confetti({origin:{y:1},zIndex:1057})},oe=(n=15)=>{let i=n*1e3,c=Date.now()+i,r=te(),f=["#FFC0CB","#FF1493","#C71585"],a=(l,p)=>Math.random()*(p-l)+l;(function l(){let p=c-Date.now();f.forEach(u=>{window.confetti({particleCount:1,startVelocity:0,ticks:Math.max(50,75*(p/i)),origin:{x:Math.random(),y:Math.abs(Math.random()-p/i)},zIndex:1057,colors:[u],shapes:[r],drift:a(-.5,.5),gravity:a(.5,1),scalar:a(.5,1)})}),p>0&&requestAnimationFrame(l)})()},ae=n=>{if(!window.confetti)return;let i=Date.now()+25,c=Math.max(.3,Math.min(1,n.getBoundingClientRect().top/window.innerHeight+.2)),r=te(),f=["#FF69B4","#FF1493"];(function a(){f.forEach(l=>{window.confetti({particleCount:2,angle:60,spread:55,shapes:[r],origin:{x:0,y:c},zIndex:1057,colors:[l]}),window.confetti({particleCount:2,angle:120,spread:55,shapes:[r],origin:{x:1,y:c},zIndex:1057,colors:[l]})}),Date.now()<i&&requestAnimationFrame(a)})()};var G=(()=>{let n=null,i=async f=>{let a=f.firstElementChild,l=f.lastElementChild,p=f.getAttribute("data-uuid"),u=parseInt(a.getAttribute("data-count-like"));f.disabled=!0,n.has(p)?await O(Z,"/api/comment/"+n.get(p)).token($.getToken()).send(H.statusResponse).then(g=>{g.data.status&&(n.unset(p),l.classList.remove("fa-solid","text-danger"),l.classList.add("fa-regular"),a.setAttribute("data-count-like",String(u-1)))}):await O(F,"/api/comment/"+p).token($.getToken()).send(H.uuidResponse).then(g=>{g.code===V&&(n.set(p,g.data.uuid),l.classList.remove("fa-regular"),l.classList.add("fa-solid","text-danger"),a.setAttribute("data-count-like",String(u+1)))}),a.innerText=a.getAttribute("data-count-like"),f.disabled=!1};return{init:()=>{n=L("likes")},love:i,tapTap:async f=>{if(!navigator.onLine)return;let a=Date.now(),l=a-parseInt(f.getAttribute("data-tapTime")),p=f.id.replace("body-content-",""),u=l<300&&l>0,g=!n.has(p)&&f.getAttribute("data-liked")!=="true";if(u&&g){navigator.vibrate&&navigator.vibrate(100),ae(f);let w=document.querySelector(`[onclick="undangan.comment.like.love(this)"][data-uuid="${p}"]`);f.setAttribute("data-liked","true"),await i(w),f.setAttribute("data-liked","false")}f.setAttribute("data-tapTime",a)}}})();var _=(()=>{let n=10,i=0,c=0,r=null,f=null,a=null,l=null,p=e=>{n=Number(e)},u=()=>n,g=()=>i,w=()=>c,b=()=>f.classList.contains("disabled")?null:f.classList.add("disabled"),m=()=>f.classList.contains("disabled")?f.classList.remove("disabled"):null,d=()=>a.classList.contains("disabled")?null:a.classList.add("disabled"),y=()=>a.classList.contains("disabled")?a.classList.remove("disabled"):null,T=()=>{l.classList.contains("d-none")&&l.classList.remove("d-none")},v=e=>{e.disabled=!0;let s=e.innerHTML;e.innerHTML='<span class="spinner-border spinner-border-sm my-0 mx-1 p-0" style="height: 0.8rem; width: 0.8rem;"></span>';let h=async()=>{await N.show(),e.disabled=!1,e.innerHTML=s,N.scroll()};return{next:async()=>{i+=n,e.innerHTML="Next"+e.innerHTML,await h(),r.innerText=String(parseInt(r.innerText)+1)},prev:async()=>{i-=n,e.innerHTML=e.innerHTML+"Prev",await h(),r.innerText=String(parseInt(r.innerText)-1)}}};return{init:()=>{l=document.getElementById("pagination"),l.innerHTML=`
        <ul class="pagination mb-2 shadow-sm rounded-4">
            <li class="page-item disabled" id="previous">
                <button class="page-link rounded-start-4" onclick="undangan.comment.pagination.previous(this)" data-offline-disabled="false">
                    <i class="fa-solid fa-circle-left me-1"></i>Prev
                </button>
            </li>
            <li class="page-item disabled">
                <span class="page-link text-theme-auto" id="page">1</span>
            </li>
            <li class="page-item" id="next">
                <button class="page-link rounded-end-4" onclick="undangan.comment.pagination.next(this)" data-offline-disabled="false">
                    Next<i class="fa-solid fa-circle-right ms-1"></i>
                </button>
            </li>
        </ul>`,r=document.getElementById("page"),f=document.getElementById("previous"),a=document.getElementById("next")},setPer:p,getPer:u,getNext:g,reset:async()=>i===0?!1:(i=0,c=0,r.innerText=1,d(),b(),await N.show(),!0),setResultData:e=>{if(c=e,i>0&&m(),c<n){d();return}y(),T()},getResultData:w,previous:async e=>{b(),!(i<0)&&(d(),await v(e).prev())},next:async e=>{d(),!(c<n)&&(b(),await v(e).next())}}})();var N=(()=>{let n=null,i=null,c=null,r=null,f=()=>'<div class="text-center p-4 my-2 bg-theme-auto rounded-4 shadow"><p class="fw-bold p-0 m-0" style="font-size: 0.95rem;">Yuk bagikan undangan ini biar banyak komentarnya</p></div>',a=(o,t)=>{document.querySelector(`[data-button-action="${o}"]`).childNodes.forEach(e=>{e.disabled=t})},l=()=>document.getElementById("comments").scrollIntoView({behavior:"smooth"}),p=o=>{o.comments&&o.comments.forEach(p);let t=document.getElementById(`body-content-${o.uuid}`);t.addEventListener("touchend",()=>G.tapTap(t))},u=async o=>{if(!confirm("Are you sure?"))return;let t=o.getAttribute("data-uuid");$.isAdmin()&&n.set(t,o.getAttribute("data-own")),a(t,!0);let e=k.disableButton(o),s=document.querySelector(`[onclick="undangan.comment.like.love(this)"][data-uuid="${t}"]`);if(s.disabled=!0,!await O(Q,"/api/comment/"+n.get(t)).token($.getToken()).send(H.statusResponse).then(S=>S.data.status,()=>!1)){e.restore(),s.disabled=!1;return}document.querySelectorAll('a[onclick="undangan.comment.showOrHide(this)"]').forEach(S=>{let D=S.getAttribute("data-uuids").split(",");if(D.find(q=>q===t)){let q=D.filter(C=>C!==t).join(",");q.length===0?S.remove():S.setAttribute("data-uuids",q)}}),n.unset(t),document.getElementById(t).remove();let E=document.getElementById("comments");E.children.length===0&&(E.innerHTML=f())},g=async o=>{let t=o.getAttribute("data-uuid"),e=!1,s=document.getElementById(`form-inner-presence-${t}`);s&&(s.disabled=!0,e=s.value==="1");let h=document.getElementById(`form-${t?`inner-${t}`:"comment"}`),E=!1,S=document.getElementById(`badge-${t}`);if(S&&(E=S.classList.contains("text-success")),t&&k.base64Encode(h.value)===h.getAttribute("data-original")&&E===e){a(t,!1),document.getElementById(`inner-${t}`).remove();return}h.disabled=!0;let D=document.querySelector(`[onclick="undangan.comment.cancel('${t}')"]`);D&&(D.disabled=!0);let q=k.disableButton(o),C=await O(Y,"/api/comment/"+n.get(t)).token($.getToken()).body(H.updateCommentRequest(s?e:null,h.value)).send(H.statusResponse).then(ie=>ie.data.status,()=>!1);if(h.disabled=!1,D&&(D.disabled=!1),s&&(s.disabled=!1),q.restore(),!C)return;a(t,!1),document.getElementById(`inner-${t}`).remove();let P=document.querySelector(`[onclick="undangan.comment.showMore(this, '${t}')"]`),M=R.convertMarkdownToHTML(k.escapeHtml(h.value)),z=document.getElementById(`content-${t}`);if(M.length>R.maxCommentLength?(z.innerHTML=P?.getAttribute("data-show")==="false"?M.slice(0,R.maxCommentLength)+"...":M,z.setAttribute("data-comment",k.base64Encode(M)),P?.style.display==="none"&&(P.style.display="block")):(z.innerHTML=M,z.removeAttribute("data-comment"),P?.style.display==="block"&&(P.style.display="none")),s&&(document.getElementById("form-presence").value=e?"1":"2",L("information").set("presence",e)),!(!s||!S)){if(e){S.classList.remove("fa-circle-xmark","text-danger"),S.classList.add("fa-circle-check","text-success");return}S.classList.remove("fa-circle-check","text-success"),S.classList.add("fa-circle-xmark","text-danger")}},w=async o=>{let t=o.getAttribute("data-uuid"),e=document.getElementById("form-name"),s=e.value;if($.isAdmin()&&(s=i.get("name")),s.length===0){t&&document.getElementById("comment").scrollIntoView({behavior:"smooth"}),alert("Name cannot be empty.");return}let h=document.getElementById("form-presence");if(!t&&h&&h.value==="0"){alert("Please select your attendance status.");return}let E=document.getElementById(`form-${t?`inner-${t}`:"comment"}`);if(E.value.length===0){alert("Comments cannot be empty.");return}!t&&e&&!$.isAdmin()&&(e.disabled=!0),h&&h.value!=="0"&&(h.disabled=!0),E.disabled=!0;let S=document.querySelector(`[onclick="undangan.comment.cancel('${t}')"]`);S&&(S.disabled=!0);let D=k.disableButton(o),q=h?h.value==="1":!0;if(!$.isAdmin()){let P=L("information");P.set("name",s),t||P.set("presence",q)}let C=await O(F,"/api/comment").token($.getToken()).body(H.postCommentRequest(t,s,q,E.value)).send(H.getCommentResponse).then(P=>P,()=>null);if(e&&(e.disabled=!1),E.disabled=!1,S&&(S.disabled=!1),h&&(h.disabled=!1),D.restore(),!(!C||C.code!==V)){if(n.set(C.data.uuid,C.data.own),E.value=null,!t){if(await _.reset()){l();return}let M=document.getElementById("comments");_.setResultData(M.children.length),_.getResultData()===_.getPer()&&M.lastElementChild.remove(),C.data.is_admin=$.isAdmin(),M.innerHTML=R.renderContent(C.data)+M.innerHTML,l()}if(t){r.set("hidden",r.get("hidden").concat([H.commentShowMore(C.data.uuid,!0)])),r.set("show",r.get("show").concat([t])),a(t,!1),document.getElementById(`inner-${t}`).remove(),C.data.is_admin=$.isAdmin(),document.getElementById(`reply-content-${t}`).insertAdjacentHTML("beforeend",R.renderInnerContent(C.data));let P=document.getElementById(`button-${t}`),M=P.querySelector("a"),z=[C.data.uuid];M&&(M.getAttribute("data-show")==="false"&&v(M),M.remove()),P.querySelector(`button[onclick="undangan.comment.like.love(this)"][data-uuid="${t}"]`).insertAdjacentHTML("beforebegin",R.renderReadMore(t,M?M.getAttribute("data-uuids").split(",").concat(z):z))}p(C.data)}},b=o=>{let t=document.getElementById(`form-inner-${o}`),e=!1,s=document.getElementById(`form-inner-presence-${o}`);s&&(e=s.value==="1");let h=!1,E=document.getElementById(`badge-${o}`);E&&(h=E.classList.contains("text-success")),(t.value.length===0||k.base64Encode(t.value)===t.getAttribute("data-original")&&h===e||confirm("Are you sure?"))&&(a(o,!1),document.getElementById(`inner-${o}`).remove())},m=o=>{let t=o.getAttribute("data-uuid");document.getElementById(`inner-${t}`)||(a(t,!0),document.getElementById(`button-${t}`).insertAdjacentElement("afterend",R.renderReply(t)))},d=async o=>{let t=o.getAttribute("data-uuid");if(document.getElementById(`inner-${t}`))return;a(t,!0);let e=k.disableButton(o);await O(W,"/api/comment/"+t).token($.getToken()).send(H.commentResponse).then(s=>{if(s.code!==U)return;let h=document.getElementById(t).getAttribute("data-parent")==="true"&&!$.isAdmin();document.getElementById(`button-${t}`).insertAdjacentElement("afterend",R.renderEdit(t,s.data.presence,h));let E=document.getElementById(`form-inner-${t}`);E.value=s.data.comment,E.setAttribute("data-original",k.base64Encode(s.data.comment))}),e.restore(),o.disabled=!0},y=(o,t)=>(o.forEach(e=>{t.find(s=>s.uuid===e.uuid)||t.push(H.commentShowMore(e.uuid)),e.comments&&e.comments.length>0&&y(e.comments,t)}),t),T=()=>{let o=document.getElementById("comments");return o.getAttribute("data-loading")==="false"&&(o.setAttribute("data-loading","true"),o.innerHTML=R.renderLoading().repeat(_.getPer())),O(W,`/api/comment?per=${_.getPer()}&next=${_.getNext()}`).token($.getToken()).send(H.getCommentsResponse).then(t=>(_.setResultData(t.data.length),o.setAttribute("data-loading","false"),t.data.length===0?(o.innerHTML=f(),t):(r.set("hidden",y(t.data,r.get("hidden"))),o.innerHTML=t.data.map(e=>R.renderContent(e)).join(""),t.data.forEach(I),t.data.forEach(p),t)))},v=o=>{let t=o.getAttribute("data-uuids").split(","),e=o.getAttribute("data-show")==="true",s=o.getAttribute("data-uuid");e?(o.setAttribute("data-show","false"),o.innerText="Show replies",o.innerText+=" ("+t.length+")",r.set("show",r.get("show").filter(h=>h!==s))):(o.setAttribute("data-show","true"),o.innerText="Hide replies",r.set("show",r.get("show").concat([s])));for(let h of t){r.set("hidden",r.get("hidden").map(S=>(S.uuid===h&&(S.show=!e),S)));let E=document.getElementById(h).classList;e?E.add("d-none"):E.remove("d-none")}},x=(o,t)=>{let e=document.getElementById(`content-${t}`),s=k.base64Decode(e.getAttribute("data-comment")),h=o.getAttribute("data-show")==="false";e.innerHTML=h?s:s.slice(0,R.maxCommentLength)+"...",o.innerText=h?"Sebagian":"Selengkapnya",o.setAttribute("data-show",h?"true":"false")},I=o=>{$.isAdmin()&&(o.comments&&o.comments.forEach(I),!(o.ip===void 0||o.user_agent===void 0||o.is_admin||c.has(o.ip))&&fetch(`https://freeipapi.com/api/json/${o.ip}`).then(t=>t.json()).then(t=>{let e=t.cityName+" - "+t.regionName;t.cityName==="-"&&t.regionName==="-"&&(e="localhost"),c.set(o.ip,e),document.getElementById(`ip-${o.uuid}`).innerHTML=`<i class="fa-solid fa-location-dot me-1"></i>${k.escapeHtml(o.ip)} <strong>${e}</strong>`}).catch(t=>{document.getElementById(`ip-${o.uuid}`).innerHTML=`<i class="fa-solid fa-location-dot me-1"></i>${k.escapeHtml(o.ip)} <strong>${k.escapeHtml(t.message)}</strong>`}))};return{like:G,pagination:_,init:()=>{G.init(),R.init(),_.init(),n=L("owns"),i=L("user"),c=L("tracker"),r=L("comment"),r.has("hidden")||r.set("hidden",[]),r.has("show")||r.set("show",[])},scroll:l,cancel:b,send:w,edit:d,reply:m,remove:u,update:g,show:T,showMore:x,showOrHide:v}})();var se=(()=>{let n=null,i=()=>{let d=document.getElementById("count-down")?.getAttribute("data-time")?.replace(" ","T");if(!d){alert("invalid count down date.");return}let y=new Date(d).getTime();setInterval(()=>{let T=Math.abs(y-Date.now());document.getElementById("day").innerText=Math.floor(T/(1e3*60*60*24)).toString(),document.getElementById("hour").innerText=Math.floor(T%(1e3*60*60*24)/(1e3*60*60)).toString(),document.getElementById("minute").innerText=Math.floor(T%(1e3*60*60)/(1e3*60)).toString(),document.getElementById("second").innerText=Math.floor(T%(1e3*60)/1e3).toString()},1e3)},c=(d,y=.01)=>{let T=document.getElementById(d),v=parseFloat(T.style.opacity),x=null;x=setInterval(()=>{if(v>0){T.style.opacity=v.toFixed(3),v-=y;return}clearInterval(x),x=null,T.remove()},10)},r=()=>{let d=window.location.search.split("to="),y=null;if(d.length>1&&d[1].length>=1&&(y=window.decodeURIComponent(d[1])),y){let v=document.getElementById("guest-name"),x=document.createElement("div");x.classList.add("m-2"),x.innerHTML=`<small class="mt-0 mb-1 mx-0 p-0">${v?.getAttribute("data-message")}</small><p class="m-0 p-0" style="font-size: 1.5rem">${k.escapeHtml(y)}</p>`,v?.appendChild(x)}let T=document.getElementById("form-name");T&&(T.value=n.get("name")??y)},f=d=>{d.disabled=!0,document.body.scrollIntoView({behavior:"instant"}),j.isAutoMode()&&(document.getElementById("button-theme").style.display="block"),K.init(),j.spyTop(),ne(),c("welcome",.025),k.timeOut(oe,1500)},a=d=>{let y=document.getElementById("show-modal-image");y.src=d.src,y.width=d.width,y.height=d.height,X.modal("modal-image").show()},l=()=>n.set("info",!0),p=()=>{document.querySelectorAll(".font-arabic").forEach(d=>{d.innerHTML=String(d.innerHTML).normalize("NFC")})},u=()=>{document.querySelectorAll("svg").forEach(d=>{k.timeOut(()=>d.classList.add(d.getAttribute("data-class")),parseInt(d.getAttribute("data-time")))})},g=()=>{let d=v=>new Date(v+":00Z").toISOString().replace(/[-:]/g,"").split(".")[0],y=new URL("https://calendar.google.com/calendar/render"),T={action:"TEMPLATE",text:"The Wedding of Tari and Erland",dates:`${d("2025-07-24 09:00")}/${d("2025-07-24 13:00")}`,details:"Tanpa mengurangi rasa hormat, dengan ini kami mengundang Bapak/Ibu/Saudara/i untuk hadir pada acara pernikahan kami. Merupakan suatu kehormatan bagi kami apabila Bapak/Ibu/Saudara/i berkenan hadir untuk memberikan doa dan restu kepada kedua mempelai.",location:"https://maps.app.goo.gl/PtFWJys9FF6fkzhG7",ctz:"Asia/Jakarta"};Object.entries(T).forEach(([v,x])=>y.searchParams.set(v,x)),document.querySelector("#home button")?.addEventListener("click",()=>window.open(y,"_blank"))},w=()=>{u(),i(),r(),p(),g(),document.getElementById("root").style.opacity="1",n.has("presence")&&(document.getElementById("form-presence").value=n.get("presence")?"1":"2"),n.get("info")&&document.getElementById("information")?.remove(),window.AOS.init(),document.body.scrollIntoView({behavior:"instant"}),c("loading",.025)},b=()=>{ee.init(),B.init(),n=L("information");let d=document.body.getAttribute("data-key");if(w(),document.addEventListener("hide.bs.modal",()=>document.activeElement?.blur()),(!d||d.length<=0)&&(J.init().load(),document.getElementById("comment")?.remove(),document.querySelector('a.nav-link[href="#comment"]')?.closest("li.nav-item")?.remove()),d.length>0){B.add(),B.add();let y=J.init();y.hasDataSrc()||y.load();let T=new URLSearchParams(window.location.search);$.setToken(T.get("k")??d),window.addEventListener("load",()=>$.guest().then(()=>{B.complete("config"),y.hasDataSrc()&&y.load(),N.init(),N.show().then(()=>B.complete("comment")).catch(()=>B.invalid("comment"))}).catch(()=>B.invalid("config")))}};return{init:()=>(j.init(),$.init(),$.isAdmin()&&(L("user").clear(),L("owns").clear(),L("likes").clear(),L("session").clear(),L("comment").clear(),L("tracker").clear()),window.addEventListener("DOMContentLoaded",b),{util:k,theme:j,comment:N,guest:{open:f,modal:a,closeInformation:l}})}})();(n=>{n.undangan=se.init()})(window);})();
